(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{582:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115),l=s(63),n=s(2619),d=s.n(n),i=s(6631),o=s(4051);function c(){var e,t;let[s,n]=(0,a.useState)(null),[c,m]=(0,a.useState)([]),[x,u]=(0,a.useState)(!0),h=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=i.f.getCurrentUser();return e?"ADMIN"===e.role?void h.push("/admin/dashboard"):void(n(e),f(e.id)):void h.push("/login")},[h]);let f=async e=>{try{let t=await i.H.order.findMany({where:{userId:e},include:{items:{include:{product:!0}}},orderBy:{createdAt:"desc"}});m(t)}catch(e){console.error("Erro ao carregar pedidos:",e)}finally{u(!1)}};return x?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-[var(--primary)] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-[var(--muted-foreground)]",children:"Carregando..."})]})}):s?(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,r.jsx)("div",{className:"card-professional p-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-[var(--primary)] to-[var(--accent)] rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-black font-bold text-2xl",children:(null==(e=s.name)?void 0:e.charAt(0))||(null==(t=s.email)?void 0:t.charAt(0))||"U"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:s.displayName||s.name||"Usu\xe1rio"}),(0,r.jsx)("p",{className:"text-[var(--muted-foreground)] text-lg",children:s.email}),(0,r.jsx)("div",{className:"flex items-center mt-2",children:(0,r.jsx)("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-sm font-medium",children:"Usu\xe1rio"})})]})]}),(0,r.jsx)("button",{onClick:()=>{i.f.logout(),h.push("/"),h.refresh()},className:"btn-secondary px-6 py-3 text-sm font-semibold",children:"Sair"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"card-professional p-6 text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-[var(--primary)]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-[var(--primary)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:c.length}),(0,r.jsx)("p",{className:"text-[var(--muted-foreground)]",children:"Pedidos Realizados"})]}),(0,r.jsxs)("div",{className:"card-professional p-6 text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:c.filter(e=>"PAID"===e.status).length}),(0,r.jsx)("p",{className:"text-[var(--muted-foreground)]",children:"Pedidos Pagos"})]}),(0,r.jsxs)("div",{className:"card-professional p-6 text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-[var(--primary)]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-[var(--primary)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:(0,o.y)(c.reduce((e,t)=>e+t.total,0))}),(0,r.jsx)("p",{className:"text-[var(--muted-foreground)]",children:"Total Gasto"})]})]}),(0,r.jsxs)("div",{className:"card-professional p-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Hist\xf3rico de Compras"})}),0===c.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-[var(--muted-foreground)]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-[var(--muted-foreground)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhum pedido encontrado"}),(0,r.jsx)("p",{className:"text-[var(--muted-foreground)] mb-6",children:"Voc\xea ainda n\xe3o fez nenhum pedido. Que tal come\xe7ar agora?"}),(0,r.jsx)(d(),{href:"/",className:"btn-primary px-6 py-3 text-sm font-semibold",children:"Ver Produtos"})]}):(0,r.jsx)("div",{className:"space-y-4",children:c.slice(0,3).map(e=>{var t;return(0,r.jsxs)("div",{className:"border border-[var(--border)] rounded-lg p-4 hover:border-[var(--primary)] transition-colors duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-white font-semibold",children:["Pedido #",e.id]}),(0,r.jsx)("p",{className:"text-[var(--muted-foreground)] text-sm",children:new Date(e.createdAt).toLocaleDateString("pt-BR")})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-[var(--primary)] font-bold text-lg",children:(0,o.y)(e.total)}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("PAID"===e.status?"bg-green-500/20 text-green-400":"PENDING"===e.status?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"),children:"PAID"===e.status?"Pago":"PENDING"===e.status?"Pendente":"Cancelado"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-[var(--muted-foreground)] text-sm",children:[(null==(t=e.items)?void 0:t.length)||0," item(s)"]}),(0,r.jsx)(d(),{href:"/pedidos/".concat(e.id),className:"text-[var(--primary)] hover:text-[var(--accent)] transition-colors duration-300 text-sm font-semibold",children:"Ver detalhes"})]})]},e.id)})})]})]}):null}},3577:(e,t,s)=>{Promise.resolve().then(s.bind(s,582))},4051:(e,t,s)=>{"use strict";function r(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}s.d(t,{y:()=>r})}},e=>{e.O(0,[619,940,441,255,358],()=>e(e.s=3577)),_N_E=e.O()}]);